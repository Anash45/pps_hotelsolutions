import{b as p,r as d,i as h,j as n,d as x,P as b,f as _}from"./app-C_y4s6Gg.js";function w({title:g,setFormErrors:r}){const{auth:c,selectedHotel:t=null}=p().props,{brandingFormData:l,setBrandingFormData:u}=d.useContext(h),[i,o]=d.useState(!1),m=async()=>{if(!t)return;r({}),o(!0);const s=new FormData;Object.entries(l).forEach(([e,a])=>{(a instanceof File||typeof a=="string")&&s.append(e,a)}),console.log("Sending Form Data: ",l);try{const{data:e}=await _.post(route("hotels.updateBranding",t.id),s,{headers:{"Content-Type":"multipart/form-data"}});e.success&&u(a=>({...a,...e.hotel,logo_image:null,logo_image_url:e.hotel.logo_image?`/storage/${e.hotel.logo_image}`:null,banner_image:null,banner_image_url:e.hotel.banner_image?`/storage/${e.hotel.banner_image}`:null})),o(!1)}catch(e){o(!1),e.response&&e.response.status===422?(console.log("Validation Errors:",e.response.data.errors),r(e.response.data.errors)):console.error("Unexpected error updating branding:",e)}};function f(s,e){const a=s==="admin"?`/test-landing?hotel_id=${e}`:"/test-landing";window.open(a,"_blank")}return n.jsxs("div",{className:"flex items-center gap-3 flex-wrap justify-between",children:[n.jsx("h5",{className:"font-bold text-xl text-grey900",children:g}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(x,{disabled:!t,className:"bg-slate-300",onClick:()=>f(c.user.role,t.id),children:"Test Landing"}),n.jsx(b,{onClick:m,disabled:!t||i,children:i?"Saving...":"Save & Publish"})]})]})}export{w as default};
