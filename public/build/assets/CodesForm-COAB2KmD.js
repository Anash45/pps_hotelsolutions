import{b as j,r,g as _,u as v,j as e,I as l,S as u,T as p,P as N,d as b,D as k}from"./app-DswjtOnX.js";import C from"./CodesPreview-yF0_viIb.js";import"./dayjs.min-DoSn12KP.js";function L({previewCodes:t,setPreviewCodes:m}){const{hotels:n,keyTypes:d}=j().props,[c,h]=r.useState("https://app.ppshotelsolutions.de");r.useEffect(()=>{(async()=>{const s=await _();console.log("Fetched domain:",s),h(s),o("domain",s)})()},[]);const{data:a,setData:o,post:x,processing:f,errors:D}=v({hotel_id:n.length>0?n[0].id:"",key_type:d.length>0?d[0].name:"",no_of_codes:"10",domain:c}),y=s=>{s.preventDefault(),x(route("codes.store"),{data:a,onSuccess:i=>{console.log(i),i.props.flash.generatedCodes&&m(i.props.flash.generatedCodes)}})},g=()=>m([]);return e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:y,className:"grid gap-3 md:grid-cols-2 grid-cols-1",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{htmlFor:"hotel",value:"Hotel",className:"text-[#344054] font-medium"}),e.jsx(u,{id:"hotel",name:"hotel_id",value:a.hotel_id,onChange:s=>o("hotel_id",s.target.value),className:"w-full block",options:n.map(s=>({value:s.id,label:s.hotel_name}))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{htmlFor:"key_type",value:"Key Type",className:"text-[#344054] font-medium"}),e.jsx(u,{id:"key_type",name:"key_type",value:a.key_type,onChange:s=>o("key_type",s.target.value),className:"w-full block",options:d.map(s=>({value:s.name,label:s.display_name}))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{htmlFor:"no_of_codes",value:"Number of Codes",className:"text-[#344054] font-medium"}),e.jsx(p,{id:"no_of_codes",name:"no_of_codes",value:a.no_of_codes,onChange:s=>o("no_of_codes",s.target.value),className:"block w-full",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{htmlFor:"domain",value:"Domain (read-only)",className:"text-[#344054] font-medium"}),e.jsx(p,{id:"domain",name:"domain",value:c,readOnly:!0,className:"block w-full"})]}),e.jsxs("div",{className:"flex-wrap gap-1 items-center md:col-span-2 flex mt-3",children:[e.jsx(N,{type:"submit",disabled:f,children:"Generate Codes"}),e.jsx(b,{type:"button",onClick:g,children:"Clear Preview"})]})]}),t.length>0&&e.jsxs("div",{className:"flex flex-col gap-3 py-3",children:[e.jsxs("p",{className:"text-[#079E04] text-xs font-medium",children:[t.length," URLs generated and CSV downloaded."]}),e.jsx("p",{className:"text-xs leading-5 font-medium text-[#475569]",children:"Once generated, the URLs are **immediately active**. The CSV is automatically downloaded and stored in the **History** on the right."}),e.jsx(k,{className:"mt-3"})]}),t.length>0&&e.jsx(C,{domain:a.domain,previewCodes:t})]})}export{L as default};
