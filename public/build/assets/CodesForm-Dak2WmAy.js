import{b as j,r,u as _,j as e,I as i,S as p,T as h,P as N,d as C,D as w}from"./app-BQ6sp7l2.js";import b from"./CodesPreview-CnoFptCC.js";let a=null;async function k(){if(a)return a;try{return a=await fetch("/vite.config.json").then(t=>t.json()),a}catch(t){return console.warn("Could not load config.json, using defaults",t),a={LINK_URL:"https://test-app.ppshotelsolutions.de"},a}}async function L(){return(await k()).LINK_URL}function P(){const{hotels:t,keyTypes:d}=j().props,[m,f]=r.useState("https://test-app.ppshotelsolutions.de");r.useEffect(()=>{(async()=>{const s=await L();console.log("Fetched domain:",s),f(s),n("domain",s)})()},[]);const{data:o,setData:n,post:x,processing:g,errors:S}=_({hotel_id:t.length>0?t[0].id:"",key_type:d.length>0?d[0].name:"",no_of_codes:"10",domain:m}),[l,u]=r.useState([]),y=s=>{s.preventDefault(),x(route("codes.store"),{data:o,onSuccess:c=>{console.log(c),c.props.flash.generatedCodes&&u(c.props.flash.generatedCodes)}})},v=()=>u([]);return e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:y,className:"grid gap-3 md:grid-cols-2 grid-cols-1",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(i,{htmlFor:"hotel",value:"Hotel",className:"text-[#344054] font-medium"}),e.jsx(p,{id:"hotel",name:"hotel_id",value:o.hotel_id,onChange:s=>n("hotel_id",s.target.value),className:"w-full block",options:t.map(s=>({value:s.id,label:s.hotel_name}))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(i,{htmlFor:"key_type",value:"Key Type",className:"text-[#344054] font-medium"}),e.jsx(p,{id:"key_type",name:"key_type",value:o.key_type,onChange:s=>n("key_type",s.target.value),className:"w-full block",options:d.map(s=>({value:s.name,label:s.display_name}))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(i,{htmlFor:"no_of_codes",value:"Number of Codes",className:"text-[#344054] font-medium"}),e.jsx(h,{id:"no_of_codes",name:"no_of_codes",value:o.no_of_codes,onChange:s=>n("no_of_codes",s.target.value),className:"block w-full",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(i,{htmlFor:"domain",value:"Domain (read-only)",className:"text-[#344054] font-medium"}),e.jsx(h,{id:"domain",name:"domain",value:m,readOnly:!0,className:"block w-full"})]}),e.jsxs("div",{className:"flex-wrap gap-1 items-center md:col-span-2 flex mt-3",children:[e.jsx(N,{type:"submit",disabled:g,children:"Generate Codes"}),e.jsx(C,{type:"button",onClick:v,children:"Clear Preview"})]})]}),l.length>0&&e.jsxs("div",{className:"flex flex-col gap-3 py-3",children:[e.jsxs("p",{className:"text-[#079E04] text-xs font-medium",children:[l.length," URLs generated and CSV downloaded."]}),e.jsx("p",{className:"text-xs leading-5 font-medium text-[#475569]",children:"Once generated, the URLs are **immediately active**. The CSV is automatically downloaded and stored in the **History** on the right."}),e.jsx(w,{className:"mt-3"})]}),l.length>0&&e.jsx(b,{domain:o.domain,previewCodes:l})]})}export{P as default};
