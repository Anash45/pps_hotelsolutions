import{b as x,c as g,r as s,j as a,H as D,S as _,k as w}from"./app-pLepdTAh.js";import{A as S}from"./AuthenticatedLayout-Cbgfq6tY.js";import v from"./DashboardTitle-DahXdNVF.js";import j from"./DashboardStats-DihTX4O5.js";import y from"./DashboardViewsChart-BK9djO3K.js";import V from"./DashboardButtonsViewsChart-DvTTHxir.js";import"./ApplicationLogo-BmQs_SHF.js";import"./CartesianChart-I8umalwG.js";function U(){const{t:r}=x(),{auth:u,hotels:c=[],selectedHotel:l=null,viewsData:o={}}=g().props,[d,C]=s.useState(["7_days","30_days","90_days"]),[e,h]=s.useState(()=>{if(typeof window<"u"){const t=localStorage.getItem("dashboard_selectedDuration");if(t&&["7_days","30_days","90_days"].includes(t))return t}return d[0]});s.useEffect(()=>{typeof window<"u"&&e&&localStorage.setItem("dashboard_selectedDuration",e)},[e]);const[i,n]=s.useState(null),[m,f]=s.useState(l?String(l.id):""),p=u.user.role==="admin",b=t=>{f(t.target.value),w.get(route("dashboard"),{hotel_id:t.target.value})};return s.useEffect(()=>{o&&e&&o[e]?n(o[e]||[]):n([])},[o,e]),a.jsxs(S,{children:[a.jsx(D,{title:r("dashboard.title")}),a.jsxs("div",{className:"py-4 md:px-6 px-4 flex flex-col gap-6",children:[a.jsx(v,{durations:d,selectedDuration:e,setSelectedDuration:h}),p&&a.jsx("div",{className:"w-64",children:a.jsx(_,{id:"hotel_id",name:"hotel_id",value:m,onChange:b,className:"w-full block",options:[{value:"",label:r("dashboard.selectHotel")},...c.map(t=>({value:String(t.id),label:t.hotel_name}))]})}),a.jsxs("div",{className:"flex flex-col gap-3.5",children:[a.jsx(j,{dashboardStats:o?.all_time??{}}),a.jsx(y,{selectedDuration:e,chartViews:i?.chart_data??{},noDataMessage:r("dashboard.chartDataUnavailable")}),a.jsx(V,{buttonsViews:i?.buttons??{},selectedDuration:e,noDataMessage:r("dashboard.viewsDataUnavailable")})]})]})]})}export{U as default};
