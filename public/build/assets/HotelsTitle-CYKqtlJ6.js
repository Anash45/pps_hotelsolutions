import{b as p,r as g,i as f,j as r,d as b,P as h,f as x}from"./app-BPYzbF-w.js";function w({title:d,setFormErrors:l}){const{auth:c,selectedHotel:t=null}=p().props,{brandingFormData:o,setBrandingFormData:u}=g.useContext(f),[i,s]=g.useState(!1),m=async()=>{if(!t)return;l({}),s(!0);const a=new FormData;Object.entries(o).forEach(([e,n])=>{(n instanceof File||typeof n=="string")&&a.append(e,n)}),o.logo_image_url==null&&a.append("logo_image_removed",!0),o.banner_image_url==null&&a.append("banner_image_removed",!0),o.section_banner_image_url==null&&a.append("section_banner_image_removed",!0),console.log("Sending Form Data: ",o);try{const{data:e}=await x.post(route("hotels.updateBranding",t.id),a,{headers:{"Content-Type":"multipart/form-data"}});e.success&&u(n=>({...n,...e.hotel,logo_image:null,logo_image_url:e.hotel.logo_image?`/storage/${e.hotel.logo_image}`:null,banner_image:null,banner_image_url:e.hotel.banner_image?`/storage/${e.hotel.banner_image}`:null,section_banner_image:null,section_banner_image_url:e.hotel.section_banner_image?`/storage/${e.hotel.section_banner_image}`:null})),s(!1)}catch(e){s(!1),e.response&&e.response.status===422?(console.log("Validation Errors:",e.response.data.errors),l(e.response.data.errors)):console.error("Unexpected error updating branding:",e)}};function _(a,e){const n=a==="admin"?`/test-landing?hotel_id=${e}`:"/test-landing";window.open(n,"_blank")}return r.jsxs("div",{className:"flex items-center gap-3 flex-wrap justify-between",children:[r.jsx("h5",{className:"font-bold text-xl text-grey900",children:d}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx(b,{disabled:!t,className:"bg-slate-300",onClick:()=>_(c.user.role,t.id),children:"Test Landing"}),r.jsx(h,{onClick:m,disabled:!t||i,children:i?"Saving...":"Save & Publish"})]})]})}export{w as default};
