import{b as f,c as h,r as d,l as b,j as s,e as x,P as j,h as w}from"./app-Dw_251uZ.js";function T({title:c,setFormErrors:i}){const{t:l}=f(),{auth:u,selectedHotel:t=null}=h().props,{brandingFormData:o,setBrandingFormData:m}=d.useContext(b),[g,r]=d.useState(!1),_=async()=>{if(!t)return;i({}),r(!0);const a=new FormData;Object.entries(o).forEach(([e,n])=>{(n instanceof File||typeof n=="string")&&a.append(e,n)}),o.logo_image_url==null&&a.append("logo_image_removed",!0),o.banner_image_url==null&&a.append("banner_image_removed",!0),o.section_banner_image_url==null&&a.append("section_banner_image_removed",!0);try{const{data:e}=await w.post(route("hotels.updateBranding",t.id),a,{headers:{"Content-Type":"multipart/form-data"}});e.success&&m(n=>({...n,...e.hotel,logo_image:null,logo_image_url:e.hotel.logo_image?`/storage/${e.hotel.logo_image}`:null,banner_image:null,banner_image_url:e.hotel.banner_image?`/storage/${e.hotel.banner_image}`:null,section_banner_image:null,section_banner_image_url:e.hotel.section_banner_image?`/storage/${e.hotel.section_banner_image}`:null})),r(!1)}catch(e){r(!1),e.response&&e.response.status===422?i(e.response.data.errors):console.error("Unexpected error updating branding:",e)}};function p(a,e){const n=a==="admin"?`/test-landing?hotel_id=${e}`:"/test-landing";window.open(n,"_blank")}return s.jsxs("div",{className:"flex items-center gap-3 flex-wrap justify-between",children:[s.jsx("h5",{className:"font-bold text-xl text-grey900",children:c}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(x,{disabled:!t,className:"bg-slate-300",onClick:()=>p(u.user.role,t.id),children:l("hotels.HotelsTitle.testLanding")}),s.jsx(j,{onClick:_,disabled:!t||g,children:l(g?"hotels.HotelsTitle.saving":"hotels.HotelsTitle.savePublish")})]})]})}export{T as default};
